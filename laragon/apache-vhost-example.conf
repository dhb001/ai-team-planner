# AI Team Planner - Apache Virtual Host Configuration
# Place this file in Laragon's Apache vhosts directory
# Typically: C:\laragon\etc\apache2\sites-enabled\

<VirtualHost *:80>
    ServerName planner.local.test
    DocumentRoot "C:/path/to/your/ai-team-planner"
    
    # Enable proxy module (ensure mod_proxy is loaded)
    ProxyPreserveHost On
    ProxyRequests Off
    
    # Frontend (React Vite dev server)
    # All requests except /api go to the frontend
    ProxyPass /api/ !
    ProxyPass / "http://127.0.0.1:5173/"
    ProxyPassReverse / "http://127.0.0.1:5173/"
    
    # Backend API
    ProxyPass /api/ "http://127.0.0.1:3001/api/"
    ProxyPassReverse /api/ "http://127.0.0.1:3001/api/"
    
    # WebSocket support for Vite HMR (optional)
    ProxyPass /vite-dev-server/ "ws://127.0.0.1:5173/"
    ProxyPassReverse /vite-dev-server/ "ws://127.0.0.1:5173/"
    
    # Logging
    ErrorLog "C:/laragon/www/logs/planner_error.log"
    CustomLog "C:/laragon/www/logs/planner_access.log" common
</VirtualHost>

# Alternative Production Configuration (serve built React from Express)
# Uncomment below and comment above if serving built frontend from Node.js

# <VirtualHost *:80>
#     ServerName planner.local.test
#     DocumentRoot "C:/path/to/your/ai-team-planner"
#     
#     ProxyPreserveHost On
#     ProxyRequests Off
#     
#     # All requests go to Node.js server (serves both static and API)
#     ProxyPass / "http://127.0.0.1:3001/"
#     ProxyPassReverse / "http://127.0.0.1:3001/"
#     
#     ErrorLog "C:/laragon/www/logs/planner_error.log"
#     CustomLog "C:/laragon/www/logs/planner_access.log" common
# </VirtualHost>

# Setup Instructions:
# 1. Copy this file to C:\laragon\etc\apache2\sites-enabled\planner.conf
# 2. Update the DocumentRoot path to match your actual project location
# 3. Add "127.0.0.1 planner.local.test" to your hosts file (C:\Windows\System32\drivers\etc\hosts)
# 4. Restart Apache in Laragon
# 5. Access the app at http://planner.local.test
